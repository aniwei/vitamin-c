# Copyright 2016 Google Inc.
#
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("../third_party.gni")

declare_args() {
  skia_use_system_brotli = false
  skia_system_brotli_include_path = "/usr/include"
  skia_system_brotli_libs = [
    "brotlidec",
    "brotlienc",
    "brotlicommon",
  ]
}

if (skia_use_system_brotli) {
  system("brotli") {
    include_dirs = [ skia_system_brotli_include_path ]
    libs = skia_system_brotli_libs
  }
} else {
  third_party("brotli") {
    public_include_dirs = [ "../externals/brotli/c/include" ]

    sources = [
      "../externals/brotli/c/common/constants.c",
      "../externals/brotli/c/common/context.c",
      "../externals/brotli/c/common/dictionary.c",
      "../externals/brotli/c/common/platform.c",
      "../externals/brotli/c/common/shared_dictionary.c",
      "../externals/brotli/c/common/transform.c",
      "../externals/brotli/c/dec/bit_reader.c",
      "../externals/brotli/c/dec/decode.c",
      "../externals/brotli/c/dec/huffman.c",
      "../externals/brotli/c/dec/state.c",
      "../externals/brotli/c/enc/backward_references.c",
      "../externals/brotli/c/enc/backward_references_hq.c",
      "../externals/brotli/c/enc/bit_cost.c",
      "../externals/brotli/c/enc/block_splitter.c",
      "../externals/brotli/c/enc/brotli_bit_stream.c",
      "../externals/brotli/c/enc/cluster.c",
      "../externals/brotli/c/enc/command.c",
      "../externals/brotli/c/enc/compound_dictionary.c",
      "../externals/brotli/c/enc/compress_fragment.c",
      "../externals/brotli/c/enc/compress_fragment_two_pass.c",
      "../externals/brotli/c/enc/dictionary_hash.c",
      "../externals/brotli/c/enc/encode.c",
      "../externals/brotli/c/enc/encoder_dict.c",
      "../externals/brotli/c/enc/entropy_encode.c",
      "../externals/brotli/c/enc/fast_log.c",
      "../externals/brotli/c/enc/histogram.c",
      "../externals/brotli/c/enc/literal_cost.c",
      "../externals/brotli/c/enc/memory.c",
      "../externals/brotli/c/enc/metablock.c",
      "../externals/brotli/c/enc/static_dict.c",
      "../externals/brotli/c/enc/utf8_util.c",
    ]
  }
}
