import("../../gn/skia.gni")
import("../third_party.gni")

declare_args() {
  skia_use_system_harfbuzz = false
  skia_system_harfbuzz_include_path = "/usr/include/harfbuzz"
  skia_system_harfbuzz_lib = "harfbuzz"
}

if (skia_use_system_harfbuzz) {
  system("harfbuzz") {
    include_dirs = [ skia_system_harfbuzz_include_path ]
    libs = [ skia_system_harfbuzz_lib ]
  }
} else {
  third_party("harfbuzz") {
    public_include_dirs = [
      "../externals/harfbuzz/src",
      "../externals/harfbuzz/src/OT",
    ]

    if (skia_use_freetype) {
      deps = [ "//third_party/freetype2" ]
      public_defines = [ "HAVE_FREETYPE" ]
    }

    sources = [
      "../externals/harfbuzz/src/hb-aat-layout.cc",
      "../externals/harfbuzz/src/hb-aat-map.cc",
      "../externals/harfbuzz/src/hb-blob.cc",
      "../externals/harfbuzz/src/hb-buffer-serialize.cc",
      "../externals/harfbuzz/src/hb-buffer-verify.cc",
      "../externals/harfbuzz/src/hb-buffer.cc",
      "../externals/harfbuzz/src/hb-common.cc",
      "../externals/harfbuzz/src/hb-draw.cc",
      "../externals/harfbuzz/src/hb-face-builder.cc",
      "../externals/harfbuzz/src/hb-face.cc",
      "../externals/harfbuzz/src/hb-fallback-shape.cc",
      "../externals/harfbuzz/src/hb-font.cc",
      "../externals/harfbuzz/src/hb-harfrust.cc",
      "../externals/harfbuzz/src/hb-kbts.cc",
      "../externals/harfbuzz/src/hb-map.cc",
      "../externals/harfbuzz/src/hb-number.cc",
      "../externals/harfbuzz/src/hb-ot-cff1-table.cc",
      "../externals/harfbuzz/src/hb-ot-cff2-table.cc",
      "../externals/harfbuzz/src/hb-ot-color.cc",
      "../externals/harfbuzz/src/hb-ot-face.cc",
      "../externals/harfbuzz/src/hb-ot-font.cc",
      "../externals/harfbuzz/src/hb-ot-layout.cc",
      "../externals/harfbuzz/src/hb-ot-map.cc",
      "../externals/harfbuzz/src/hb-ot-math.cc",
      "../externals/harfbuzz/src/hb-ot-meta.cc",
      "../externals/harfbuzz/src/hb-ot-metrics.cc",
      "../externals/harfbuzz/src/hb-ot-name.cc",
      "../externals/harfbuzz/src/hb-ot-shape-fallback.cc",
      "../externals/harfbuzz/src/hb-ot-shape-normalize.cc",
      "../externals/harfbuzz/src/hb-ot-shape.cc",
      "../externals/harfbuzz/src/hb-ot-shaper-arabic.cc",
      "../externals/harfbuzz/src/hb-ot-shaper-default.cc",
      "../externals/harfbuzz/src/hb-ot-shaper-hangul.cc",
      "../externals/harfbuzz/src/hb-ot-shaper-hebrew.cc",
      "../externals/harfbuzz/src/hb-ot-shaper-indic-table.cc",
      "../externals/harfbuzz/src/hb-ot-shaper-indic.cc",
      "../externals/harfbuzz/src/hb-ot-shaper-khmer.cc",
      "../externals/harfbuzz/src/hb-ot-shaper-myanmar.cc",
      "../externals/harfbuzz/src/hb-ot-shaper-syllabic.cc",
      "../externals/harfbuzz/src/hb-ot-shaper-thai.cc",
      "../externals/harfbuzz/src/hb-ot-shaper-use.cc",
      "../externals/harfbuzz/src/hb-ot-shaper-vowel-constraints.cc",
      "../externals/harfbuzz/src/hb-ot-tag.cc",
      "../externals/harfbuzz/src/hb-ot-var.cc",
      "../externals/harfbuzz/src/hb-outline.cc",
      "../externals/harfbuzz/src/hb-paint-bounded.cc",
      "../externals/harfbuzz/src/hb-paint-extents.cc",
      "../externals/harfbuzz/src/hb-paint.cc",
      "../externals/harfbuzz/src/hb-set.cc",
      "../externals/harfbuzz/src/hb-shape-plan.cc",
      "../externals/harfbuzz/src/hb-shape.cc",
      "../externals/harfbuzz/src/hb-shaper.cc",
      "../externals/harfbuzz/src/hb-static.cc",
      "../externals/harfbuzz/src/hb-style.cc",
      "../externals/harfbuzz/src/hb-subset-cff-common.cc",
      "../externals/harfbuzz/src/hb-subset-cff1.cc",
      "../externals/harfbuzz/src/hb-subset-cff2.cc",
      "../externals/harfbuzz/src/hb-subset-input.cc",
      "../externals/harfbuzz/src/hb-subset-instancer-iup.cc",
      "../externals/harfbuzz/src/hb-subset-instancer-solver.cc",
      "../externals/harfbuzz/src/hb-subset-plan-layout.cc",
      "../externals/harfbuzz/src/hb-subset-plan-var.cc",
      "../externals/harfbuzz/src/hb-subset-plan.cc",
      "../externals/harfbuzz/src/hb-subset-serialize.cc",
      "../externals/harfbuzz/src/hb-subset-table-cff.cc",
      "../externals/harfbuzz/src/hb-subset-table-color.cc",
      "../externals/harfbuzz/src/hb-subset-table-layout.cc",
      "../externals/harfbuzz/src/hb-subset-table-other.cc",
      "../externals/harfbuzz/src/hb-subset-table-var.cc",
      "../externals/harfbuzz/src/hb-subset.cc",
      "../externals/harfbuzz/src/hb-ucd.cc",
      "../externals/harfbuzz/src/hb-unicode.cc",
      "../externals/harfbuzz/src/OT/Var/VARC/VARC.cc",
      "../externals/harfbuzz/src/hb-wasm-api.cc",
      "../externals/harfbuzz/src/hb-wasm-shape.cc",
    ]

    if (skia_use_freetype) {
      sources += [ "../externals/harfbuzz/src/hb-ft.cc" ]
    }
  }
}
